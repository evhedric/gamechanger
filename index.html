<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Program GameChanger - Field Mockup</title>
  <style>
    body {
      margin: 0;
      background-color: #000;
      color: #fff;
      font-family: 'Inter', sans-serif;
    }
    header {
      display: flex;
      align-items: center;
      padding: 1rem;
      background-color: #111;
      justify-content: space-between;
    }
    header img {
      height: 50px;
    }
    .score {
      font-size: 1.2rem;
      text-align: right;
    }
    .main {
      display: flex;
      height: calc(100vh - 100px);
    }
    .lineup {
      width: 25%;
      background-color: #111;
      padding: 1rem;
      overflow-y: auto;
    }
    .lineup h2 {
      margin-bottom: 0.5rem;
    }
    .lineup-player {
      margin: 0.3rem 0;
      background-color: #222;
      padding: 0.5rem;
      border-radius: 6px;
      cursor: grab;
      transition: background 0.2s;
    }
    .lineup-player.active {
      background-color: green;
      color: #fff;
    }
    .field {
      width: 75%;
      position: relative;
      background-image: url('https://upload.wikimedia.org/wikipedia/commons/thumb/e/ef/Baseball_field_diamond.svg/2000px-Baseball_field_diamond.svg.png');
      background-size: contain;
      background-position: center;
      background-repeat: no-repeat;
    }
    .player-label {
      position: absolute;
      font-size: 0.9rem;
      font-weight: bold;
      text-align: center;
      color: white;
      background-color: rgba(0, 0, 0, 0.6);
      border-radius: 5px;
      padding: 0.3rem 0.4rem;
      transform: translate(-50%, -50%);
      pointer-events: auto;
    }
    .player-label.hover {
      outline: 2px dashed #00f0ff;
    }
    .reset-button {
      margin-top: 1rem;
      padding: 0.5rem;
      background: #ff4444;
      border: none;
      color: white;
      width: 100%;
      border-radius: 8px;
      font-size: 1rem;
      cursor: pointer;
    }
    @media (pointer: coarse) {
      .player-label, .lineup-player {
        touch-action: none;
      }
    }
  </style>
</head>
<body>
  <header>
    <img src="https://media-service.gc.com/a2b23453-4e93-4595-9be8-7f95ad33a109" alt="Shockers Logo" />
    <div class="score">
      <div>Shockers 5 | Red Sox 3</div>
      <div>Inning: 4</div>
    </div>
  </header>
  <div class="main">
    <div class="lineup" id="lineup">
      <h2>Lineup</h2>
      <div class="lineup-player" draggable="true">1. Everett H. (#7)</div>
      <div class="lineup-player" draggable="true">2. Brecken M. (#5)</div>
      <div class="lineup-player" draggable="true">3. Chase S. (#10)</div>
      <div class="lineup-player" draggable="true">4. Jaxon L. (#4)</div>
      <div class="lineup-player" draggable="true">5. Carter W. (#8)</div>
      <div class="lineup-player" draggable="true">6. Mason G. (#12)</div>
      <div class="lineup-player" draggable="true">7. Tyler B. (#6)</div>
      <div class="lineup-player" draggable="true">8. Liam P. (#1)</div>
      <div class="lineup-player" draggable="true">9. Noah D. (#2)</div>
      <button class="reset-button" onclick="resetField()">Reset Field</button>
    </div>
    <div class="field" id="field"></div>
  </div>
  <script>
    const field = document.getElementById('field');
    const lineup = document.getElementById('lineup');

    const fieldPositions = [
      { name: 'P', top: '52%', left: '50%' },
      { name: 'C', top: '85%', left: '50%' },
      { name: '1B', top: '62%', left: '75%' },
      { name: '2B', top: '38%', left: '58%' },
      { name: 'SS', top: '45%', left: '42%' },
      { name: '3B', top: '60%', left: '25%' },
      { name: 'LF', top: '28%', left: '22%' },
      { name: 'CF', top: '12%', left: '50%' },
      { name: 'RF', top: '28%', left: '78%' }
    ];

    const assignments = {};

    function updatePositionLabels() {
      document.querySelectorAll('.player-label').forEach(label => {
        const pos = label.dataset.position;
        const player = assignments[pos];
        label.textContent = player ? `${pos}: ${player}` : pos;
      });

      document.querySelectorAll('.lineup-player').forEach(item => {
        const isActive = Object.values(assignments).includes(item.textContent);
        item.classList.toggle('active', isActive);
        if (isActive) {
          for (const [pos, name] of Object.entries(assignments)) {
            if (name === item.textContent) {
              item.textContent = `${item.textContent.split(' (')[0]} (${pos})`;
            }
          }
        } else {
          item.textContent = item.textContent.split(' (')[0];
        }
      });
    }

    function resetField() {
      Object.keys(assignments).forEach(key => delete assignments[key]);
      updatePositionLabels();

      const playerNames = [
        '1. Everett H. (#7)', '2. Brecken M. (#5)', '3. Chase S. (#10)',
        '4. Jaxon L. (#4)', '5. Carter W. (#8)', '6. Mason G. (#12)',
        '7. Tyler B. (#6)', '8. Liam P. (#1)', '9. Noah D. (#2)'
      ];

      lineup.querySelectorAll('.lineup-player').forEach(e => e.remove());
      playerNames.forEach(name => {
        const div = document.createElement('div');
        div.className = 'lineup-player';
        div.draggable = true;
        div.textContent = name;
        addDragHandlers(div);
        lineup.insertBefore(div, lineup.querySelector('button'));
      });
    }

    function addDragHandlers(el) {
      el.addEventListener('dragstart', e => {
        e.dataTransfer.setData('text/plain', el.textContent.split(' (')[0]);
      });
    }

    fieldPositions.forEach(pos => {
      const label = document.createElement('div');
      label.className = 'player-label';
      label.style.top = pos.top;
      label.style.left = pos.left;
      label.dataset.position = pos.name;
      label.textContent = pos.name;

      label.addEventListener('dragover', e => {
        e.preventDefault();
        label.classList.add('hover');
      });
      label.addEventListener('dragleave', () => {
        label.classList.remove('hover');
      });
      label.addEventListener('drop', e => {
        e.preventDefault();
        label.classList.remove('hover');
        const name = e.dataTransfer.getData('text/plain');

        // Remove existing assignment if any
        Object.keys(assignments).forEach(key => {
          if (assignments[key] === name) {
            delete assignments[key];
          }
        });

        assignments[pos.name] = name;
        updatePositionLabels();
      });

      label.addEventListener('dblclick', () => {
        if (assignments[pos.name]) {
          const div = document.createElement('div');
          div.className = 'lineup-player';
          div.draggable = true;
          div.textContent = assignments[pos.name];
          addDragHandlers(div);
          lineup.insertBefore(div, lineup.querySelector('button'));
          delete assignments[pos.name];
          updatePositionLabels();
        }
      });

      field.appendChild(label);
    });

    resetField();

    if (window.matchMedia("(pointer: coarse)").matches) {
      alert("Touch mode enabled: Tap and hold to drag players to the field.");
    }
  </script>
</body>
</html>
